<view class="order-confirm">
  <!-- 地址选择 -->
  <view class="order-address-container">
    <view class="section-header">
      <text class="section-title">收货地址确认</text>
      <view class="address-actions">
        <button class="action-btn" bindtap="goToAddress">地址管理</button>
      </view>
    </view>
    <view class="address-card" wx:if="{{defaultAddress}}">
      <view class="address-content">
        <view class="address-header">
          <text class="recipient">姓名：{{defaultAddress.addressUserNickName}}</text>
        </view>
        <view class="address-detail">
          <text>收货地址：{{defaultAddress.address}}</text>
        </view>
      </view>
    </view>
    <view class="no-address" wx:else bindtap="goToAddress">
      <text>请设置收货地址</text>
      <text class="arrow">></text>
    </view>
  </view>

  <!-- 商品清单 -->
  <view class="order-section">
    <view class="section-header">
      <text class="section-title">商品清单</text>
    </view>
    
    <!-- 直接购买模式 -->
    <block wx:if="{{!isFromCart && !isFromOrderCenter}}">
      <view class="product-card">
        <image class="product-img" src="{{product.productImg}}" mode="aspectFill" />
        <view class="product-info">
          <view class="product-title">{{product.productName}}</view>
          <view class="product-price">单价：¥{{product.productPrice}}</view>
        </view>
        <view class="product-ctrl">
          <view class="count-btn" bindtap="decreaseCount">-</view>
          <text class="count">{{product.count}}</text>
          <view class="count-btn" bindtap="increaseCount">+</view>
        </view>
      </view>
    </block>
    <!-- 订单中心结算模式 -->
    <block wx:if="{{!isFromCart && isFromOrderCenter}}">
      <view class="cart-items">
        <view class="product-card" wx:for="{{cartItems}}" wx:key="cartId">
          <image class="product-img" src="{{item.cartProductUrl}}" mode="aspectFill" />
          <view class="product-info">
            <view class="product-title">{{item.cartProductName}}</view>
            <view class="product-price">单价：¥{{item.cartProductPrice}}</view>
            <view class="product-count">数量：{{item.productCount}}</view>
          </view>
        </view>
      </view>
    </block>
    <!-- 购物车结算模式 -->
    <block wx:if="{{isFromCart && !isFromOrderCenter}}">
      <view class="cart-items">
        <view class="product-card" wx:for="{{cartItems}}" wx:key="cartId">
          <image class="product-img" src="{{item.cartProductUrl}}" mode="aspectFill" />
          <view class="product-info">
            <view class="product-title">{{item.cartProductName}}</view>
            <view class="product-price">单价：¥{{item.cartProductPrice}}</view>
            <view class="product-count">数量：{{item.productCount}}</view>
          </view>
        </view>
      </view>
    </block>
  </view>

  <!-- 优惠信息 -->
  <view class="order-section">
    <view class="section-header">
      <text class="section-title">优惠信息</text>
      <view class="section-action" bindtap="showDiscounts">
        <text>查看全部</text>
        <text class="arrow">></text>
      </view>
    </view>
    <view class="discount-info">
      <text class="discount-text">无可用优惠</text>
    </view>
  </view>

  <!-- 订单摘要 -->
  <view class="order-section">
    <view class="section-header">
      <text class="section-title">订单摘要</text>
    </view>
    <view class="summary-item">
      <text>商品总价</text>
      <text>¥{{totalPrice}}</text>
    </view>
    <view class="summary-item">
      <text class="item-label">运费</text>
      <text class="item-value">免运费</text>
    </view>
    <view class="summary-item separator"></view>
    <view class="summary-item total">
      <text>实付款</text>
      <text>¥{{totalPrice}}</text>
    </view>
  </view>

  <!-- 支付按钮 -->
  <view class="fixed-bottom">
    <view class="total-price-container">
      <text class="label">实付款:</text>
      <text class="total-price">¥{{totalPrice}}</text>
    </view>
    <button class="pay-btn" bindtap="payNow">立即支付</button>
  </view>

</view>