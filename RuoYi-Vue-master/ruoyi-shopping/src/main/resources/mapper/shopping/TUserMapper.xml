<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.userInfo.mapper.TUserMapper">
  <resultMap type="TUser" id="TUserResult">
    <result property="userId" column="user_id" />
    <result property="userName" column="user_name" />
    <result property="userPwd" column="user_pwd" />
    <result property="userPhoto" column="user_photo" />
    <result property="userNickName" column="user_nick_name" />
  </resultMap>

  <sql
    id="selectTUserVo"
  >select user_id, user_name, user_pwd, user_photo, user_nick_name from t_user</sql>

  <select id="selectTUserList" parameterType="TUser" resultMap="TUserResult">
    <include refid="selectTUserVo" />
    <where>
      <if test="userName != null  and userName != ''">and user_name = #{userName}</if>
    </where>
  </select>

  <select id="selectTUserByUserId" parameterType="Long" resultMap="TUserResult">
    <include refid="selectTUserVo" />
    where user_id = #{userId}
  </select>

  <select
    id="selectTUserByUserName"
    parameterType="String"
    resultMap="TUserResult"
  >select user_id, user_name, user_pwd, user_photo, user_nick_name from t_user where user_name = #{userName}</select>

  <insert id="insertTUser" parameterType="TUser" useGeneratedKeys="true" keyProperty="userId">
    insert into t_user
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="userName != null and userName != ''">user_name,</if>
      <if test="userPwd != null">user_pwd,</if>
      <if test="userPhoto != null">user_photo,</if>
      <if test="userNickName != null">user_nick_name,</if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="userName != null and userName != ''">#{userName},</if>
      <if test="userPwd != null">#{userPwd},</if>
      <if test="userPhoto != null">#{userPhoto},</if>
      <if test="userNickName != null">#{userNickName},</if>
    </trim>
  </insert>

  <update id="updateTUser" parameterType="TUser">
    update t_user
    <trim prefix="SET" suffixOverrides=",">
      <if test="userName != null and userName != ''">user_name = #{userName},</if>
      <if test="userPwd != null">user_pwd = #{userPwd},</if>
      <if test="userPhoto != null">user_photo = #{userPhoto},</if>
      <if test="userNickName != null">user_nick_name = #{userNickName},</if>
    </trim>
    where user_id = #{userId}
  </update>

  <delete id="deleteTUserByUserId" parameterType="Long">delete from t_user where user_id = #{userId}</delete>

  <delete id="deleteTUserByUserIds" parameterType="String">
    delete from t_user where user_id in
    <foreach item="userId" collection="array" open="(" separator="," close=")">#{userId}</foreach>
  </delete>
</mapper>